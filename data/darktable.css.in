/*
    This file is part of darktable,
    copyright (c) 2019 Aurélien Pierre.

    darktable is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    darktable is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with darktable.  If not, see <http://www.gnu.org/licenses/>.
*/

/* This has been tested with GTK 3.24 on Gnome */

/* Perceptually uniform grey gradient */

/* grey_00 = pure black is forbidden for visual assessment */
@define-color grey_05 #111111;
@define-color grey_10 #1b1b1b;
@define-color grey_15 #262626;
@define-color grey_20 #303030;
@define-color grey_25 #3b3b3b;
@define-color grey_30 #474747;
@define-color grey_35 #525252;
@define-color grey_40 #5e5e5e;
@define-color grey_45 #6a6a6a;
@define-color grey_50 #777777;
@define-color grey_55 #848484;
@define-color grey_60 #919191;
@define-color grey_65 #9e9e9e;
@define-color grey_70 #ababab;
@define-color grey_75 #b9b9b9;
@define-color grey_80 #c6c6c6;
@define-color grey_85 #d4d4d4;
@define-color grey_90 #e2e2e2;
@define-color grey_95 #f1f1f1;
/* grey_100 = pure white is forbidden for visual assessment */


/* General rules :

  * keep just enough contrast in the UI to make text readable, but not
  too much to avoid distractions from the picture,
  * avoid sharp and unnecessary details for the same reason (shadows,
  borders, fancy bits). Use plain shapes.
  * keep 60 % distance between background and foreground colors for active controls
  * keep 30 % distance between background and foreground colors for labels and info
  * keep 20 % distance between background and foreground colors for insensitive controls
  * accents are ± 10 % from the background color
  * borders are ± 5 % from the background
  * buttons and control follow Google Material Design principles :
    https://material.io/design/
*/


/* General */
@define-color selected_bg_color @grey_05;
@define-color border_color @grey_10;
@define-color bg_color @grey_15;
@define-color fg_color @grey_75;
@define-color base_color @fg_color;
@define-color text_color @grey_05;

/* Scroll bars (sliders) */
@define-color scroll_bar_inactive @grey_40;
@define-color scroll_bar_active @grey_50;
@define-color scroll_bar_bg @grey_10;

/* Modules box */
@define-color plugin_bg_color @grey_25;
@define-color plugin_fg_color @grey_85;
@define-color section_label @grey_60;

/* Modules controls */
@define-color bauhaus_fg @grey_70;
@define-color bauhaus_border shade(@plugin_bg_color, 0.5);
@define-color bauhaus_indicator_border @grey_25;
@define-color bauhaus_fill @grey_40;
@define-color bauhaus_bg alpha(@border_color, 0.25);
@define-color bauhaus_fg_hover @grey_80;
@define-color bauhaus_fg_insensitive alpha(@bauhaus_fg, 0.5);

@define-color button_bg @grey_35;
@define-color button_fg @grey_85;
@define-color button_border @grey_40;
@define-color button_checked_bg @grey_20;
@define-color button_checked_fg @grey_80;
@define-color button_hover_bg @grey_45;
@define-color button_hover_fg @grey_95;

/* Tooltips and contextual helpers */
@define-color tooltip_bg_color @grey_05;
@define-color tooltip_fg_color @grey_70;
@define-color really_dark_bg_color @grey_05;

/* Views */
@define-color darkroom_bg_color @grey_50;
@define-color darkroom_preview_bg_color @grey_25;
@define-color lighttable_bg_color @grey_50;
@define-color lighttable_preview_bg_color @grey_25;

/* Brushes */
@define-color brush_cursor alpha(white, .9);
@define-color brush_trace alpha(black, .8);

/* Lighttable and film-strip */
@define-color thumbnail_bg_color @grey_45; /* area between border and outline */
@define-color thumbnail_selected_bg_color @grey_65;
@define-color thumbnail_hover_bg_color @grey_80;
@define-color thumbnail_outline_color @grey_20; /* square around image+metadata */
@define-color thumbnail_selected_outline_color @grey_45;
@define-color thumbnail_hover_outline_color @grey_65;
@define-color thumbnail_font_color @grey_45;
@define-color thumbnail_selected_font_color @grey_50;
@define-color thumbnail_hover_font_color @grey_75;
@define-color thumbnail_border_color @grey_15; /* rectangle directly around image */
@define-color thumbnail_selected_border_color @grey_90;
@define-color filmstrip_bg_color @lighttable_bg_color;

/* Graphs */
@define-color graph_bg alpha(@grey_25, 1);
@define-color graph_border @grey_05;
@define-color graph_fg @grey_75;
@define-color graph_fg_active @grey_95;
@define-color graph_grid @grey_05;
@define-color inset_histogram alpha(@grey_65, 0.50);

* {
  font-family: "Roboto", "Oxygen", "Segoe UI", "San Francisco", "Droid Sans", "Helvetica Neue", "Ubuntu", "Fira Sans", "Source Sans Pro", "Cantarell", sans-serif;
  font-weight: 200;
  font-size: 1em;
  color: @fg_color;
  background-color: @bg_color;
  text-shadow:none;
  padding: 0;
  margin: 0;
  border: 0;
  outline-style:none;
  background-image: none;
}

/* Reset GTK defaults */

#lib-plugin-ui *,
#iop-plugin-ui *,
combobox,
combobox *,
combobox togglebutton *,
notebook,
notebook *,
notebook tab *,
table,
popover,
frame *,
#lib-modulelist *,
alignment,
entry,
entry *,
dialog,
dialog *,
colorswatch,
colorswatch *
stack,
stack *,
scrollbar,
scrollbar *
eventbox,
eventbox *
{
  background-color:transparent;
  margin:0;
  border:0;
  padding:0;
  outline-style:none;
}

/* General properties */

#main_window *:disabled {
  color: @grey_10;
}

/* Frame around plugin boxes */

#lib-plugin-ui,
#iop-plugin-ui
{
  border: 0.5pt solid @border_color;
  border-radius: 0.5em;
  margin: 0pt;
  /*padding: 10pt;*/
  color: @plugin_fg_color;
  padding: 1pt; /* this actually serves as a separator between modules */
  background-color: @plugin_bg_color;
}

#lib-plugin-ui:selected,
#iop-plugin-ui:selected,
#lib-plugin-ui:active,
#iop-plugin-ui:active
{
  padding: 5pt;
}

/* Buttons */

button,
dialog button
{
  border-radius: 2pt;
  box-shadow:none;
  padding: 1pt 4pt;
  margin: 0pt 0.5pt;
  border: 0.5pt solid @border_color;
  background-color: @plugin_bg_color;
  color: @button_fg;
  font-family: "Roboto";
  min-height: 9pt;
  min-width: 9pt;
}

#lib-plugin-ui * button,
#iop-plugin-ui * button
{
  padding: 1pt 4pt;
  border-radius: 1em;
  margin: 1pt 0.5pt;
  border: 0.5pt solid @button_border;
  background-color: @button_bg;
  color: @button_fg;
}

#recent-collection-ui button,
#history-ui button
{
  background-color: transparent;
  border: 0;
  font: 0.95em "Roboto Condensed Light";
}

#panel_label button
{
  font-size: 0.9em;
}

#lib-plugin-ui * button:checked,
#iop-plugin-ui * button:checked,
button:checked
{
  background-color: @button_checked_bg;
  color: @button_checked_fg;
}

#lib-plugin-ui * button:hover,
#iop-plugin-ui * button:hover,
button:hover,
dialog button:hover *
{
  background-color: @button_hover_bg;
  color: @button_hover_fg;
}

#lib-plugin-ui * button:disabled,
#iop-plugin-ui * button:disabled,
button:disabled
{
  background-color: @bauhaus_bg;
  border: 0;
}

/* Checkbox */

#lib-plugin-ui checkbutton check,
#iop-plugin-ui checkbutton check,
checkbutton check
{
  margin-right: 8pt;
  background-color: @bauhaus_bg;
  color: @bauhaus_fg;
  border: 1pt solid @border_color;
}

/* Text fields and text boxes */

@define-color field_bg @grey_20;
@define-color field_fg @grey_80;
@define-color field_bg_active @grey_30;
@define-color feild_fg_active @grey_90;
@define-color field_bg_hover @grey40;

#iop-plugin-ui entry,
#lib-plugin-ui entry,
entry {
  border-radius: 2pt;
  border: 0.5pt solid @border_color;
  color:@bauhaus_fg;
  background-color: @field_bg;
  padding:0 2pt;
}

#iop-plugin-ui entry:hover,
#lib-plugin-ui entry:hover,
entry:hover {
  border-radius: 2pt;
  border: 0.5pt solid @border_color;
  color:@bauhaus_fg;
  background-color: @field_hover_bg;
}

#iop-plugin-ui entry:checked,
#lib-plugin-ui entry:checked,
entry:checked,
#iop-plugin-ui entry:active,
#lib-plugin-ui entry:active,
entry:active,
#iop-plugin-ui entry:focus,
#lib-plugin-ui entry:focus,
entry:focus
 {
  border-radius: 2pt;
  border: 0.5pt solid @border_color;
  color:@bauhaus_fg;
  background-color: @field_active_bg;
}

#iop-plugin-ui entry selection,
#lib-plugin-ui entry selection,
entry selection {
  background-color:shade(@selected_bg_color, 1.7);
  min-height: 0;
  min-width: 0;
}

/* Combobox */

/* garbage GTK treats comboboxes as buttons, so we have to overwrite
the general button settings above to match GTK comboboxes with bauhaus ones */

combobox button,
#iop-plugin-ui combobox button,
#lib-plugin-ui combobox button
{
  border: 0;
  background-color: transparent;
  border-radius: 2pt;
  color: @bauhaus_fg;
}

#background_job_eventbox,
#iop-plugin-ui combobox,
#lib-plugin-ui combobox,
#iop-plugin-ui combobox *,
#lib-plugin-ui combobox *
{
  background-color: @bauhaus_bg_color;
}

/* Labels */

#header_label,
#darktable_label,
#view_label,
#view_dropdown
{
  color: @fg_color;
  background-color: @bg_color;
  font-size: 1.5em;
  margin:0;
  border:0;
  padding:0;
}

#panel_label
{
  color: @fg_color;
  background-color: @bg_color;
  margin:0;
  border:0;
  padding:0;
  font-weight: 200;
  font-stretch: extra-condensed;
}


#section_label
{
  padding: 3pt 0;
  color: @section_label;
  border-bottom: 0.5pt solid  @section_label;
  margin: 0 0 3pt 0;
  font-weight: 400;
}

#view_dropdown *
{
  color: shade(@fg_color, 0.7);
  margin: 0;
  padding: 0;
}

#view_dropdown *:disabled
{
  color: shade(@fg_color, 0.5);
}

#view_dropdown *:selected,
#view_label:selected {
  color: shade(@fg_color, 0.9);
}

#view_dropdown menuitem:hover *
{
  color: @fg_color;
}


/* sliders */

scale{}
scale.trough.highlight{}
scrollbar.contents.trough.highlight{}

#lib-plugin-ui scrollbar slider,
#iop-plugin-ui scrollbar slider,
scrollbar slider,
dialog scrollbar slider
{
  background-color:@scroll_bar_inactive;
  border: 2pt solid transparent;
  background-color: @scroll_bar_inactive;
  margin: 0;
  min-width: 4pt;
  min-height: 4pt;
}

scrollbar,
dialog scrollbar
scrollbar.horizontal,
scrollbar.vertical,
#iop-plugin-ui scrollbar.horizontal,
#iop-plugin-ui scrollbar.vertical,
#lib-plugin-ui scrollbar.horizontal,
#lib-plugin-ui scrollbar.vertical,
dialog scrollbar.vertical,
dialog scrollbar.horizontal
{
  border-color: @scroll_bar_bg;
  background-color: @scroll_bar_bg;
  border-radius: 4pt;
}

scrollbar.horizontal slider:hover,
scrollbar.vertical slider:hover,
#iop-plugin-ui scrollbar.horizontal slider:hover,
#iop-plugin-ui scrollbar.vertical slider:hover,
#lib-plugin-ui scrollbar.horizontal slider:hover,
#lib-plugin-ui scrollbar.vertical slider:hover,
dialog scrollbar.vertical slider:hover,
dialog scrollbar.horizontal slider:hover
{
  background-color: @scroll_bar_active;
}

/* Context menu & tooltips */

context-menu,
tooltip
{
  background-color: @really_dark_bg_color;
  box-shadow: 0 0 0 5pt @border_color;
  outline-style:none;
  border-radius: 2pt;
}

#main_window context-menu menuitem *:disabled,
context-menu menuitem *:disabled
{
  color: @plugin_bg_color;
}

#lib-plugin-ui menuitem,
#iop-plugin-ui menuitem,
notebook menuitem,
menuitem,
tooltip *
{
  padding: 4pt;
  background-color:@really_dark_bg_color;
  color: @fg_color;
  outline-style:none;
}

#lib-plugin-ui menuitem:hover,
#iop-plugin-ui menuitem:hover,
notebook menuitem:hover,
menuitem:hover
{
  background-color: @button_hover_bg;
  color: @button_hover_fg;
}

/* Tree view : not sure what it does, if it does anything */

#iop-plugin-ui treeview.view *,
#lib-plugin-ui treeview.view *,
treeview.view *
{
   background-color: @plugin_bg_color;
   color: @plugin_fg_color;
}

#iop-plugin-ui treeview.view *:hover,
#lib-plugin-ui treeview.view *:hover,
treeview.view *:hover
{
  background-color: @button_hover_bg;
  color: @button_hover_fg;
}

#iop-plugin-ui treeview.view *:selected,
#lib-plugin-ui treeview.view *:selected,
treeview.view *:selected
{
   background-color: shade(@plugin_bg, 1.2);
}

/* Notebooks tabs */

#iop-plugin-ui notebook tab *,
#lib-plugin-ui notebook tab *,
notebook tab *
{
  padding:3pt 6pt;
  border: 0.5pt solid @button_border;
  background-color: @button_bg;
  color: @button_fg;
  border-radius: 0.5em 0.5em 0 0;
  font-weight: 400;
}

#iop-plugin-ui notebook tab *:hover,
#lib-plugin-ui notebook tab *:hover,
notebook tab *:hover
{
  background-color: @button_hover_bg;
  color: @button_hover_fg;
  border-radius: 0.5em 0.5em 0 0;
  border-radius: 0.5em 0.5em 0 0;
}

#iop-plugin-ui notebook tab:checked *,
#lib-plugin-ui notebook tab:checked *,
notebook tab:checked *
{
  background-color: @button_checked_bg;
  color: @button_checked_fg;
  border-radius: 0.5em 0.5em 0 0;
}

/* Bauhaus controls (sliders etc.) */

#bauhaus-popup
{
  background-color: @bauhaus_bg;
  color: @bauhaus_fg;
}

#bauhaus-popup:selected
{
  color: @bauhaus_fg;
}

#bauhaus-popup:hover
{
  color: @bauhaus_fg_hover;
}

#bauhaus-popup:disabled
{
  color: @bauhaus_fg;
}

/* separator */

separator, separator:hover
{
  color: @selected_bg_color;
  border-style: solid;
  border-width: 2pt;
  border-color: @selected_bg_color;
  background-color: @selected_bg_color;
}

/* Dialog window */

dialog
{
  background-color: @bg_color;
}

dialog *
{
  margin: 1pt;
  padding:0;
}

dialog scrolledwindow
{
  padding: 0 1pt 0 8pt;
  margin: 0;
  background-color: @plugin_bg_color;
}

/* empty space at top/bottom of sidepanels when scrolled */
undershoot.top,
undershoot.bottom,
undershoot.left,
undershoot.right
{
  background: none;
}


/* STUFF TO MERGE WITH ABOVE RULES */

aboutdialog
{
  background-color: @bg_color;
}

aboutdialog box,
aboutdialog box *
{
  background-color: @bg_color;
}

aboutdialog headerbar
{
  padding: 2pt;
}

progressbar *
{
  background-color: @text_color;
}

filechooserdialog eventbox
{
  background-color: transparent;
}

filechooserdialog sidebar-icon
{
  padding: 0pt 5pt 0pt 10pt;
}

filechooserdialog sidebar-row
{
  padding-top: 3pt;
}

filechooserdialog sidebar-row:hover
{
  background-color: shade(@selected_bg_color, 1.7);
}

progressbar
{
  background-color: @text_color;
}
progressbar progress
{
  background-color: @fg_color;
}

cell:selected
{
  background-color: shade(@selected_bg_color, 1.2);
}

#show_mask_button
{
    color: #FFFF00;
}

#pref_section
{
    border-bottom: 2px solid @fg_color;
}
#pref_section *
{
    font-size: 1.3em;
    margin-left: 10em;
    margin-right: 10em;
}
